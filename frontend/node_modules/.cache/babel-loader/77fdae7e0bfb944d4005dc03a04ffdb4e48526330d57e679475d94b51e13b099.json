{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SETUP\\\\Desktop\\\\yap-t carbonsync ai\\\\frontend\\\\src\\\\components\\\\ForecastChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport './ForecastChart.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ForecastChart = ({\n  data,\n  forecast,\n  optimizedForecast,\n  impacts\n}) => {\n  _s();\n  const chartRef = useRef(null);\n  useEffect(() => {\n    if (!forecast || !chartRef.current) return;\n\n    // Clear previous chart\n    chartRef.current.innerHTML = '';\n\n    // Create a simple SVG chart\n    const createChart = () => {\n      const container = chartRef.current;\n\n      // Process data to ensure one point per month\n      const processedData = processMonthlyData(data);\n      const processedForecast = processForecastData(forecast);\n      const processedOptimized = optimizedForecast ? processForecastData(optimizedForecast) : [];\n\n      // Ensure no overlap between historical and forecast data\n      // Find the latest date in historical data\n      if (processedData.length > 0 && processedForecast.length > 0) {\n        const latestHistoricalDate = new Date(processedData[processedData.length - 1].month + '-01');\n\n        // Filter out any forecast data that overlaps with historical data\n        const filteredForecast = processedForecast.filter(item => {\n          const forecastDate = new Date(item.month + '-01');\n          return forecastDate > latestHistoricalDate;\n        });\n\n        // Replace processed forecast with filtered forecast\n        processedForecast.length = 0;\n        processedForecast.push(...filteredForecast);\n\n        // Do the same for optimized forecast if it exists\n        if (processedOptimized.length > 0) {\n          const filteredOptimized = processedOptimized.filter(item => {\n            const optimizedDate = new Date(item.month + '-01');\n            return optimizedDate > latestHistoricalDate;\n          });\n          processedOptimized.length = 0;\n          processedOptimized.push(...filteredOptimized);\n        }\n      }\n\n      // Find min and max values for scaling\n      const allValues = [...processedData.map(d => d.emissions), ...processedForecast.map(d => d.emissions), ...processedForecast.map(d => d.upper), ...processedForecast.map(d => d.lower), ...processedOptimized.map(d => d.emissions)].filter(v => v !== null && v !== undefined);\n      const minValue = Math.min(...allValues) * 0.9;\n      const maxValue = Math.max(...allValues) * 1.1;\n\n      // Combine all months for x-axis, ensuring correct order\n      let allMonths = [];\n\n      // Add historical months first\n      allMonths = [...processedData.map(d => d.monthLabel)];\n\n      // Then add forecast months\n      const forecastMonths = processedForecast.map(d => d.monthLabel);\n      const optimizedMonths = processedOptimized.map(d => d.monthLabel);\n\n      // Combine all unique months and ensure they're in chronological order\n      const uniqueMonths = Array.from(new Set([...allMonths, ...forecastMonths, ...optimizedMonths]));\n\n      // Sort months chronologically\n      uniqueMonths.sort((a, b) => {\n        const dateA = new Date(a);\n        const dateB = new Date(b);\n        return dateA - dateB;\n      });\n\n      // Chart dimensions\n      const chartWidth = 1200;\n      const chartHeight = 600;\n      const marginLeft = 120;\n      const marginRight = 60;\n      const marginTop = 60;\n      const marginBottom = 150; // Increased bottom margin for labels\n\n      const graphWidth = chartWidth - marginLeft - marginRight;\n      const graphHeight = chartHeight - marginTop - marginBottom;\n\n      // Create SVG element\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('width', chartWidth);\n      svg.setAttribute('height', chartHeight);\n      svg.style.display = 'block';\n      svg.style.margin = '0 auto';\n      svg.style.background = 'rgba(0, 0, 0, 0.2)';\n      svg.style.borderRadius = '10px';\n\n      // Add title\n      const title = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      title.setAttribute('x', chartWidth / 2);\n      title.setAttribute('y', 30);\n      title.setAttribute('text-anchor', 'middle');\n      title.setAttribute('font-family', 'Orbitron, sans-serif');\n      title.setAttribute('font-size', '22px');\n      title.setAttribute('fill', '#FFFFFF');\n      title.textContent = 'Monthly Carbon Emissions Forecast';\n      svg.appendChild(title);\n\n      // Create group for graph\n      const graph = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      graph.setAttribute('transform', `translate(${marginLeft}, ${marginTop})`);\n      svg.appendChild(graph);\n\n      // Helper function to convert data point to position\n      const getX = index => index / (uniqueMonths.length - 1) * graphWidth;\n      const getY = value => graphHeight - (value - minValue) / (maxValue - minValue) * graphHeight;\n\n      // Draw x and y axes\n      const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n      xAxis.setAttribute('x1', 0);\n      xAxis.setAttribute('y1', graphHeight);\n      xAxis.setAttribute('x2', graphWidth);\n      xAxis.setAttribute('y2', graphHeight);\n      xAxis.setAttribute('stroke', '#FFFFFF');\n      xAxis.setAttribute('stroke-width', '2');\n      graph.appendChild(xAxis);\n      const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n      yAxis.setAttribute('x1', 0);\n      yAxis.setAttribute('y1', 0);\n      yAxis.setAttribute('x2', 0);\n      yAxis.setAttribute('y2', graphHeight);\n      yAxis.setAttribute('stroke', '#FFFFFF');\n      yAxis.setAttribute('stroke-width', '2');\n      graph.appendChild(yAxis);\n\n      // Draw x-axis labels\n      uniqueMonths.forEach((month, index) => {\n        const x = getX(index);\n\n        // Draw tick\n        const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        tick.setAttribute('x1', x);\n        tick.setAttribute('y1', graphHeight);\n        tick.setAttribute('x2', x);\n        tick.setAttribute('y2', graphHeight + 10);\n        tick.setAttribute('stroke', '#FFFFFF');\n        tick.setAttribute('stroke-width', '2');\n        graph.appendChild(tick);\n\n        // Draw label - only show every other month if there are many months\n        if (uniqueMonths.length <= 12 || index % 2 === 0) {\n          const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n          label.setAttribute('x', x);\n          label.setAttribute('y', graphHeight + 30);\n          label.setAttribute('text-anchor', 'middle');\n          label.setAttribute('font-family', 'Roboto, sans-serif');\n          label.setAttribute('font-size', '14px');\n          label.setAttribute('fill', '#FFFFFF');\n          label.setAttribute('transform', `rotate(45, ${x}, ${graphHeight + 30})`);\n\n          // Shorten month labels if too many\n          let displayText = month;\n          if (uniqueMonths.length > 12) {\n            const parts = month.split(' ');\n            displayText = parts[0].substring(0, 3) + ' ' + parts[1];\n          }\n          label.textContent = displayText;\n          graph.appendChild(label);\n        }\n      });\n\n      // Draw y-axis labels\n      const yTicks = 5;\n      for (let i = 0; i <= yTicks; i++) {\n        const value = minValue + (maxValue - minValue) * (i / yTicks);\n        const y = getY(value);\n\n        // Draw tick\n        const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        tick.setAttribute('x1', -10);\n        tick.setAttribute('y1', y);\n        tick.setAttribute('x2', 0);\n        tick.setAttribute('y2', y);\n        tick.setAttribute('stroke', '#FFFFFF');\n        tick.setAttribute('stroke-width', '2');\n        graph.appendChild(tick);\n\n        // Draw label\n        const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        label.setAttribute('x', -15);\n        label.setAttribute('y', y + 5);\n        label.setAttribute('text-anchor', 'end');\n        label.setAttribute('font-family', 'Roboto, sans-serif');\n        label.setAttribute('font-size', '14px');\n        label.setAttribute('fill', '#FFFFFF');\n        label.textContent = value.toFixed(1);\n        graph.appendChild(label);\n\n        // Draw grid line\n        const gridLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        gridLine.setAttribute('x1', 0);\n        gridLine.setAttribute('y1', y);\n        gridLine.setAttribute('x2', graphWidth);\n        gridLine.setAttribute('y2', y);\n        gridLine.setAttribute('stroke', 'rgba(255, 255, 255, 0.1)');\n        gridLine.setAttribute('stroke-width', '1');\n        graph.appendChild(gridLine);\n      }\n\n      // Draw axis titles\n      const xTitle = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      xTitle.setAttribute('x', graphWidth / 2);\n      xTitle.setAttribute('y', graphHeight + 70);\n      xTitle.setAttribute('text-anchor', 'middle');\n      xTitle.setAttribute('font-family', 'Orbitron, sans-serif');\n      xTitle.setAttribute('font-size', '16px');\n      xTitle.setAttribute('fill', '#FFFFFF');\n      xTitle.textContent = 'Month';\n      graph.appendChild(xTitle);\n      const yTitle = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      yTitle.setAttribute('transform', `rotate(-90, -70, ${graphHeight / 2})`);\n      yTitle.setAttribute('x', -70);\n      yTitle.setAttribute('y', graphHeight / 2);\n      yTitle.setAttribute('text-anchor', 'middle');\n      yTitle.setAttribute('font-family', 'Orbitron, sans-serif');\n      yTitle.setAttribute('font-size', '16px');\n      yTitle.setAttribute('fill', '#FFFFFF');\n      yTitle.textContent = 'Emissions (tons CO2e)';\n      graph.appendChild(yTitle);\n\n      // Draw data lines and points\n\n      // Draw actual data\n      if (processedData.length > 0) {\n        // Draw line\n        let pathD = '';\n        processedData.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            if (i === 0) {\n              pathD = `M ${x} ${y}`;\n            } else {\n              pathD += ` L ${x} ${y}`;\n            }\n          }\n        });\n        const actualPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        actualPath.setAttribute('d', pathD);\n        actualPath.setAttribute('fill', 'none');\n        actualPath.setAttribute('stroke', '#00FFFF');\n        actualPath.setAttribute('stroke-width', '3');\n        graph.appendChild(actualPath);\n\n        // Draw points\n        processedData.forEach(point => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', x);\n            circle.setAttribute('cy', y);\n            circle.setAttribute('r', '8');\n            circle.setAttribute('fill', '#00FFFF');\n            circle.setAttribute('stroke', '#000000');\n            circle.setAttribute('stroke-width', '2');\n\n            // Add tooltip data\n            circle.setAttribute('data-month', point.monthLabel);\n            circle.setAttribute('data-value', point.emissions.toFixed(2));\n            circle.setAttribute('data-type', 'Actual');\n\n            // Add hover effect\n            circle.addEventListener('mouseover', showTooltip);\n            circle.addEventListener('mouseout', hideTooltip);\n            graph.appendChild(circle);\n          }\n        });\n      }\n\n      // Draw forecast data\n      if (processedForecast.length > 0) {\n        // Draw confidence interval\n        let upperPathD = '';\n        let lowerPathD = '';\n        processedForecast.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const upperY = getY(point.upper);\n            const lowerY = getY(point.lower);\n            if (i === 0) {\n              upperPathD = `M ${x} ${upperY}`;\n              lowerPathD = `M ${x} ${lowerY}`;\n            } else {\n              upperPathD += ` L ${x} ${upperY}`;\n              lowerPathD += ` L ${x} ${lowerY}`;\n            }\n          }\n        });\n\n        // Draw upper bound\n        const upperPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        upperPath.setAttribute('d', upperPathD);\n        upperPath.setAttribute('fill', 'none');\n        upperPath.setAttribute('stroke', 'rgba(255, 0, 255, 0.3)');\n        upperPath.setAttribute('stroke-width', '2');\n        upperPath.setAttribute('stroke-dasharray', '5,5');\n        graph.appendChild(upperPath);\n\n        // Draw lower bound\n        const lowerPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        lowerPath.setAttribute('d', lowerPathD);\n        lowerPath.setAttribute('fill', 'none');\n        lowerPath.setAttribute('stroke', 'rgba(255, 0, 255, 0.3)');\n        lowerPath.setAttribute('stroke-width', '2');\n        lowerPath.setAttribute('stroke-dasharray', '5,5');\n        graph.appendChild(lowerPath);\n\n        // Fill confidence interval\n        const confidencePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        confidencePath.setAttribute('d', `${upperPathD} L ${getX(uniqueMonths.indexOf(processedForecast[processedForecast.length - 1].monthLabel))} ${getY(processedForecast[processedForecast.length - 1].lower)} ${lowerPathD.replace('M', 'L')} Z`);\n        confidencePath.setAttribute('fill', 'rgba(255, 0, 255, 0.1)');\n        confidencePath.setAttribute('stroke', 'none');\n        graph.insertBefore(confidencePath, upperPath);\n\n        // Draw forecast line\n        let pathD = '';\n        processedForecast.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            if (i === 0) {\n              pathD = `M ${x} ${y}`;\n            } else {\n              pathD += ` L ${x} ${y}`;\n            }\n          }\n        });\n        const forecastPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        forecastPath.setAttribute('d', pathD);\n        forecastPath.setAttribute('fill', 'none');\n        forecastPath.setAttribute('stroke', '#FF00FF');\n        forecastPath.setAttribute('stroke-width', '3');\n        graph.appendChild(forecastPath);\n\n        // Draw points\n        processedForecast.forEach(point => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', x);\n            circle.setAttribute('cy', y);\n            circle.setAttribute('r', '8');\n            circle.setAttribute('fill', '#FF00FF');\n            circle.setAttribute('stroke', '#000000');\n            circle.setAttribute('stroke-width', '2');\n\n            // Add tooltip data\n            circle.setAttribute('data-month', point.monthLabel);\n            circle.setAttribute('data-value', point.emissions.toFixed(2));\n            circle.setAttribute('data-type', 'Forecast');\n\n            // Add hover effect\n            circle.addEventListener('mouseover', showTooltip);\n            circle.addEventListener('mouseout', hideTooltip);\n            graph.appendChild(circle);\n          }\n        });\n      }\n\n      // Draw optimized forecast data\n      if (processedOptimized.length > 0) {\n        // Draw line\n        let pathD = '';\n        processedOptimized.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            if (i === 0) {\n              pathD = `M ${x} ${y}`;\n            } else {\n              pathD += ` L ${x} ${y}`;\n            }\n          }\n        });\n        const optimizedPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        optimizedPath.setAttribute('d', pathD);\n        optimizedPath.setAttribute('fill', 'none');\n        optimizedPath.setAttribute('stroke', '#00FF00');\n        optimizedPath.setAttribute('stroke-width', '3');\n        optimizedPath.setAttribute('stroke-dasharray', '5,5');\n        graph.appendChild(optimizedPath);\n\n        // Draw points\n        processedOptimized.forEach(point => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', x);\n            circle.setAttribute('cy', y);\n            circle.setAttribute('r', '8');\n            circle.setAttribute('fill', '#00FF00');\n            circle.setAttribute('stroke', '#000000');\n            circle.setAttribute('stroke-width', '2');\n\n            // Add tooltip data\n            circle.setAttribute('data-month', point.monthLabel);\n            circle.setAttribute('data-value', point.emissions.toFixed(2));\n            circle.setAttribute('data-type', 'Optimized');\n\n            // Add hover effect\n            circle.addEventListener('mouseover', showTooltip);\n            circle.addEventListener('mouseout', hideTooltip);\n            graph.appendChild(circle);\n          }\n        });\n      }\n\n      // Create legend\n      const legendGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      legendGroup.setAttribute('transform', `translate(${marginLeft + 20}, ${marginTop - 30})`);\n      const legendItems = [{\n        label: 'Actual Emissions',\n        color: '#00FFFF'\n      }, {\n        label: 'Forecast Emissions',\n        color: '#FF00FF'\n      }, {\n        label: 'Optimized Emissions',\n        color: '#00FF00'\n      }];\n      legendItems.forEach((item, index) => {\n        const x = index * 200; // Increased spacing between legend items\n\n        // Draw color box\n        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        rect.setAttribute('x', x);\n        rect.setAttribute('y', 0);\n        rect.setAttribute('width', 15);\n        rect.setAttribute('height', 15);\n        rect.setAttribute('fill', item.color);\n        rect.setAttribute('stroke', '#000000');\n        rect.setAttribute('stroke-width', '1');\n        legendGroup.appendChild(rect);\n\n        // Draw label\n        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        text.setAttribute('x', x + 20);\n        text.setAttribute('y', 12);\n        text.setAttribute('font-family', 'Roboto, sans-serif');\n        text.setAttribute('font-size', '12px');\n        text.setAttribute('fill', '#FFFFFF');\n        text.textContent = item.label;\n        legendGroup.appendChild(text);\n      });\n      svg.appendChild(legendGroup);\n\n      // Create tooltip\n      const tooltip = document.createElement('div');\n      tooltip.className = 'chart-tooltip';\n      tooltip.style.display = 'none';\n      tooltip.style.position = 'absolute';\n      tooltip.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';\n      tooltip.style.color = '#FFFFFF';\n      tooltip.style.padding = '10px';\n      tooltip.style.borderRadius = '5px';\n      tooltip.style.pointerEvents = 'none';\n      tooltip.style.zIndex = '1000';\n      tooltip.style.fontFamily = 'Roboto, sans-serif';\n      tooltip.style.fontSize = '12px';\n      tooltip.style.border = '1px solid rgba(0, 255, 255, 0.5)';\n      tooltip.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.5)';\n      document.body.appendChild(tooltip);\n\n      // Tooltip functions\n      function showTooltip(event) {\n        const circle = event.target;\n        const month = circle.getAttribute('data-month');\n        const value = circle.getAttribute('data-value');\n        const type = circle.getAttribute('data-type');\n        tooltip.innerHTML = `\n          <div style=\"font-weight: bold; margin-bottom: 5px; color: #00FFFF;\">${month}</div>\n          <div>${type} Emissions: ${value} tons CO2e</div>\n        `;\n        tooltip.style.display = 'block';\n\n        // Position tooltip near the point but avoid edges\n        const rect = svg.getBoundingClientRect();\n        const circleRect = circle.getBoundingClientRect();\n\n        // Calculate position to avoid going off-screen\n        let leftPos = circleRect.left + window.scrollX + 10;\n        let topPos = circleRect.top + window.scrollY - 40;\n\n        // Adjust if tooltip would go off right edge\n        if (leftPos + 200 > window.innerWidth) {\n          leftPos = circleRect.left + window.scrollX - 210;\n        }\n\n        // Adjust if tooltip would go off top edge\n        if (topPos < 10) {\n          topPos = circleRect.top + window.scrollY + 20;\n        }\n        tooltip.style.left = `${leftPos}px`;\n        tooltip.style.top = `${topPos}px`;\n\n        // Highlight the point\n        circle.setAttribute('r', '10');\n      }\n      function hideTooltip(event) {\n        tooltip.style.display = 'none';\n\n        // Reset point size\n        event.target.setAttribute('r', '8');\n      }\n\n      // Add the SVG to the container\n      container.appendChild(svg);\n\n      // Clean up tooltip when component unmounts\n      return () => {\n        if (tooltip && tooltip.parentNode) {\n          tooltip.parentNode.removeChild(tooltip);\n        }\n      };\n    };\n\n    // Create the chart\n    const cleanup = createChart();\n\n    // Add impact factors section if available\n    if (impacts && Object.keys(impacts).length > 0) {\n      const impactSection = document.createElement('div');\n      impactSection.className = 'impact-factors';\n      const impactTitle = document.createElement('h4');\n      impactTitle.textContent = 'Key Impact Factors';\n      impactSection.appendChild(impactTitle);\n      const impactList = document.createElement('div');\n      impactList.className = 'impact-list';\n\n      // Sort impacts by score\n      const sortedImpacts = Object.entries(impacts).sort((a, b) => Math.abs(b[1].impact_score) - Math.abs(a[1].impact_score)).slice(0, 3);\n      sortedImpacts.forEach(([factor, data], index) => {\n        let factorName = factor;\n        if (factor === 'energy_use') factorName = 'Energy Use';\n        if (factor === 'transport') factorName = 'Transport';\n        if (factor === 'waste') factorName = 'Waste';\n        if (factor === 'water') factorName = 'Water';\n        if (factor === 'fuel') factorName = 'Fuel';\n        if (factor === 'grid_intensity') factorName = 'Grid Intensity';\n        const impactItem = document.createElement('div');\n        impactItem.className = 'impact-item';\n        const impactRank = document.createElement('div');\n        impactRank.className = 'impact-rank';\n        impactRank.textContent = index + 1;\n        const impactInfo = document.createElement('div');\n        impactInfo.className = 'impact-info';\n        const impactName = document.createElement('div');\n        impactName.className = 'impact-name';\n        impactName.textContent = factorName;\n        const impactScore = document.createElement('div');\n        impactScore.className = 'impact-score';\n        const impactValue = document.createElement('span');\n        impactValue.className = 'impact-value';\n        impactValue.textContent = Math.abs(data.impact_score).toFixed(2);\n        impactScore.textContent = 'Impact Score: ';\n        impactScore.appendChild(impactValue);\n        impactInfo.appendChild(impactName);\n        impactInfo.appendChild(impactScore);\n        impactItem.appendChild(impactRank);\n        impactItem.appendChild(impactInfo);\n        impactList.appendChild(impactItem);\n      });\n      impactSection.appendChild(impactList);\n      chartRef.current.appendChild(impactSection);\n    }\n\n    // Add forecast data table below the chart\n    if (forecast && forecast.length > 0) {\n      const tableContainer = document.createElement('div');\n      tableContainer.className = 'forecast-table-container';\n      tableContainer.style.marginTop = '30px';\n      tableContainer.style.width = '100%';\n      tableContainer.style.overflowX = 'auto';\n      const table = document.createElement('table');\n      table.className = 'forecast-table';\n      table.style.width = '100%';\n      table.style.borderCollapse = 'collapse';\n      table.style.color = '#FFFFFF';\n      table.style.fontFamily = 'Roboto, sans-serif';\n      table.style.fontSize = '14px';\n      table.style.textAlign = 'center';\n\n      // Create table header\n      const thead = document.createElement('thead');\n      const headerRow = document.createElement('tr');\n      const headers = ['Month', 'Predicted Emissions', 'Lower Bound', 'Upper Bound'];\n      if (optimizedForecast && optimizedForecast.length > 0) {\n        headers.push('Optimized Emissions', 'Potential Savings');\n      }\n      headers.forEach(header => {\n        const th = document.createElement('th');\n        th.textContent = header;\n        th.style.padding = '10px';\n        th.style.borderBottom = '1px solid rgba(0, 255, 255, 0.3)';\n        th.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n        headerRow.appendChild(th);\n      });\n      thead.appendChild(headerRow);\n      table.appendChild(thead);\n\n      // Create table body\n      const tbody = document.createElement('tbody');\n\n      // Process forecast data for table\n      const tableData = processForecastData(forecast);\n      const optimizedData = optimizedForecast ? processForecastData(optimizedForecast) : [];\n      tableData.forEach((item, index) => {\n        const row = document.createElement('tr');\n        row.style.backgroundColor = index % 2 === 0 ? 'rgba(0, 0, 0, 0.2)' : 'rgba(0, 0, 0, 0.1)';\n\n        // Month\n        const monthCell = document.createElement('td');\n        monthCell.textContent = item.monthLabel;\n        monthCell.style.padding = '8px';\n        row.appendChild(monthCell);\n\n        // Predicted Emissions\n        const emissionsCell = document.createElement('td');\n        emissionsCell.textContent = item.emissions.toFixed(2);\n        emissionsCell.style.padding = '8px';\n        row.appendChild(emissionsCell);\n\n        // Lower Bound\n        const lowerCell = document.createElement('td');\n        lowerCell.textContent = item.lower.toFixed(2);\n        lowerCell.style.padding = '8px';\n        row.appendChild(lowerCell);\n\n        // Upper Bound\n        const upperCell = document.createElement('td');\n        upperCell.textContent = item.upper.toFixed(2);\n        upperCell.style.padding = '8px';\n        row.appendChild(upperCell);\n\n        // Add optimized data if available\n        if (optimizedData.length > 0) {\n          const optimizedItem = optimizedData[index];\n\n          // Optimized Emissions\n          const optimizedCell = document.createElement('td');\n          optimizedCell.textContent = optimizedItem.emissions.toFixed(2);\n          optimizedCell.style.padding = '8px';\n          optimizedCell.style.color = '#00FF00';\n          row.appendChild(optimizedCell);\n\n          // Potential Savings\n          const savingsCell = document.createElement('td');\n          const savings = item.emissions - optimizedItem.emissions;\n          savingsCell.textContent = savings.toFixed(2);\n          savingsCell.style.padding = '8px';\n          savingsCell.style.color = savings > 0 ? '#00FF00' : '#FF0000';\n          row.appendChild(savingsCell);\n        }\n        tbody.appendChild(row);\n      });\n      table.appendChild(tbody);\n      tableContainer.appendChild(table);\n      chartRef.current.appendChild(tableContainer);\n    }\n\n    // Return cleanup function\n    return cleanup;\n  }, [data, forecast, optimizedForecast, impacts]);\n\n  // Process actual data to ensure one point per month\n  const processMonthlyData = data => {\n    if (!data || data.length === 0) return [];\n\n    // Group by month\n    const monthlyData = {};\n    data.forEach(item => {\n      if (!item.date || !item.emissions) return;\n      const date = new Date(item.date);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      if (!monthlyData[monthKey]) {\n        monthlyData[monthKey] = {\n          month: monthKey,\n          monthLabel: `${date.toLocaleString('default', {\n            month: 'short'\n          })} ${date.getFullYear()}`,\n          emissions: 0\n        };\n      }\n      monthlyData[monthKey].emissions += parseFloat(item.emissions) || 0;\n    });\n\n    // Convert to array and sort by month\n    return Object.values(monthlyData).sort((a, b) => a.month.localeCompare(b.month));\n  };\n\n  // Process forecast data\n  const processForecastData = forecastData => {\n    if (!forecastData || forecastData.length === 0) return [];\n    return forecastData.map(item => {\n      const date = new Date(item.ds);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      return {\n        month: monthKey,\n        monthLabel: `${date.toLocaleString('default', {\n          month: 'short'\n        })} ${date.getFullYear()}`,\n        emissions: item.predicted_emissions,\n        lower: item.lower_bound,\n        upper: item.upper_bound\n      };\n    }).sort((a, b) => a.month.localeCompare(b.month)); // Ensure forecast data is sorted by month\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"forecast-chart-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chartRef,\n      className: \"chart-area\",\n      style: {\n        minHeight: '600px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 779,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 778,\n    columnNumber: 5\n  }, this);\n};\n_s(ForecastChart, \"X+1SfQQ6xefXNU27aQW843M7cTw=\");\n_c = ForecastChart;\nexport default ForecastChart;\nvar _c;\n$RefreshReg$(_c, \"ForecastChart\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","ForecastChart","data","forecast","optimizedForecast","impacts","_s","chartRef","current","innerHTML","createChart","container","processedData","processMonthlyData","processedForecast","processForecastData","processedOptimized","length","latestHistoricalDate","Date","month","filteredForecast","filter","item","forecastDate","push","filteredOptimized","optimizedDate","allValues","map","d","emissions","upper","lower","v","undefined","minValue","Math","min","maxValue","max","allMonths","monthLabel","forecastMonths","optimizedMonths","uniqueMonths","Array","from","Set","sort","a","b","dateA","dateB","chartWidth","chartHeight","marginLeft","marginRight","marginTop","marginBottom","graphWidth","graphHeight","svg","document","createElementNS","setAttribute","style","display","margin","background","borderRadius","title","textContent","appendChild","graph","getX","index","getY","value","xAxis","yAxis","forEach","x","tick","label","displayText","parts","split","substring","yTicks","i","y","toFixed","gridLine","xTitle","yTitle","pathD","point","monthIndex","indexOf","actualPath","circle","addEventListener","showTooltip","hideTooltip","upperPathD","lowerPathD","upperY","lowerY","upperPath","lowerPath","confidencePath","replace","insertBefore","forecastPath","optimizedPath","legendGroup","legendItems","color","rect","text","tooltip","createElement","className","position","backgroundColor","padding","pointerEvents","zIndex","fontFamily","fontSize","border","boxShadow","body","event","target","getAttribute","type","getBoundingClientRect","circleRect","leftPos","left","window","scrollX","topPos","top","scrollY","innerWidth","parentNode","removeChild","cleanup","Object","keys","impactSection","impactTitle","impactList","sortedImpacts","entries","abs","impact_score","slice","factor","factorName","impactItem","impactRank","impactInfo","impactName","impactScore","impactValue","tableContainer","width","overflowX","table","borderCollapse","textAlign","thead","headerRow","headers","header","th","borderBottom","tbody","tableData","optimizedData","row","monthCell","emissionsCell","lowerCell","upperCell","optimizedItem","optimizedCell","savingsCell","savings","monthlyData","date","monthKey","getFullYear","String","getMonth","padStart","toLocaleString","parseFloat","values","localeCompare","forecastData","ds","predicted_emissions","lower_bound","upper_bound","children","ref","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/SETUP/Desktop/yap-t carbonsync ai/frontend/src/components/ForecastChart.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport './ForecastChart.css';\n\nconst ForecastChart = ({ data, forecast, optimizedForecast, impacts }) => {\n  const chartRef = useRef(null);\n\n  useEffect(() => {\n    if (!forecast || !chartRef.current) return;\n    \n    // Clear previous chart\n    chartRef.current.innerHTML = '';\n    \n    // Create a simple SVG chart\n    const createChart = () => {\n      const container = chartRef.current;\n      \n      // Process data to ensure one point per month\n      const processedData = processMonthlyData(data);\n      const processedForecast = processForecastData(forecast);\n      const processedOptimized = optimizedForecast ? processForecastData(optimizedForecast) : [];\n      \n      // Ensure no overlap between historical and forecast data\n      // Find the latest date in historical data\n      if (processedData.length > 0 && processedForecast.length > 0) {\n        const latestHistoricalDate = new Date(processedData[processedData.length - 1].month + '-01');\n        \n        // Filter out any forecast data that overlaps with historical data\n        const filteredForecast = processedForecast.filter(item => {\n          const forecastDate = new Date(item.month + '-01');\n          return forecastDate > latestHistoricalDate;\n        });\n        \n        // Replace processed forecast with filtered forecast\n        processedForecast.length = 0;\n        processedForecast.push(...filteredForecast);\n        \n        // Do the same for optimized forecast if it exists\n        if (processedOptimized.length > 0) {\n          const filteredOptimized = processedOptimized.filter(item => {\n            const optimizedDate = new Date(item.month + '-01');\n            return optimizedDate > latestHistoricalDate;\n          });\n          \n          processedOptimized.length = 0;\n          processedOptimized.push(...filteredOptimized);\n        }\n      }\n      \n      // Find min and max values for scaling\n      const allValues = [\n        ...processedData.map(d => d.emissions),\n        ...processedForecast.map(d => d.emissions),\n        ...processedForecast.map(d => d.upper),\n        ...processedForecast.map(d => d.lower),\n        ...processedOptimized.map(d => d.emissions)\n      ].filter(v => v !== null && v !== undefined);\n      \n      const minValue = Math.min(...allValues) * 0.9;\n      const maxValue = Math.max(...allValues) * 1.1;\n      \n      // Combine all months for x-axis, ensuring correct order\n      let allMonths = [];\n      \n      // Add historical months first\n      allMonths = [...processedData.map(d => d.monthLabel)];\n      \n      // Then add forecast months\n      const forecastMonths = processedForecast.map(d => d.monthLabel);\n      const optimizedMonths = processedOptimized.map(d => d.monthLabel);\n      \n      // Combine all unique months and ensure they're in chronological order\n      const uniqueMonths = Array.from(new Set([...allMonths, ...forecastMonths, ...optimizedMonths]));\n      \n      // Sort months chronologically\n      uniqueMonths.sort((a, b) => {\n        const dateA = new Date(a);\n        const dateB = new Date(b);\n        return dateA - dateB;\n      });\n      \n      // Chart dimensions\n      const chartWidth = 1200;\n      const chartHeight = 600;\n      const marginLeft = 120;\n      const marginRight = 60;\n      const marginTop = 60;\n      const marginBottom = 150; // Increased bottom margin for labels\n      \n      const graphWidth = chartWidth - marginLeft - marginRight;\n      const graphHeight = chartHeight - marginTop - marginBottom;\n      \n      // Create SVG element\n      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n      svg.setAttribute('width', chartWidth);\n      svg.setAttribute('height', chartHeight);\n      svg.style.display = 'block';\n      svg.style.margin = '0 auto';\n      svg.style.background = 'rgba(0, 0, 0, 0.2)';\n      svg.style.borderRadius = '10px';\n      \n      // Add title\n      const title = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      title.setAttribute('x', chartWidth / 2);\n      title.setAttribute('y', 30);\n      title.setAttribute('text-anchor', 'middle');\n      title.setAttribute('font-family', 'Orbitron, sans-serif');\n      title.setAttribute('font-size', '22px');\n      title.setAttribute('fill', '#FFFFFF');\n      title.textContent = 'Monthly Carbon Emissions Forecast';\n      svg.appendChild(title);\n      \n      // Create group for graph\n      const graph = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      graph.setAttribute('transform', `translate(${marginLeft}, ${marginTop})`);\n      svg.appendChild(graph);\n      \n      // Helper function to convert data point to position\n      const getX = (index) => (index / (uniqueMonths.length - 1)) * graphWidth;\n      const getY = (value) => graphHeight - ((value - minValue) / (maxValue - minValue)) * graphHeight;\n      \n      // Draw x and y axes\n      const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n      xAxis.setAttribute('x1', 0);\n      xAxis.setAttribute('y1', graphHeight);\n      xAxis.setAttribute('x2', graphWidth);\n      xAxis.setAttribute('y2', graphHeight);\n      xAxis.setAttribute('stroke', '#FFFFFF');\n      xAxis.setAttribute('stroke-width', '2');\n      graph.appendChild(xAxis);\n      \n      const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n      yAxis.setAttribute('x1', 0);\n      yAxis.setAttribute('y1', 0);\n      yAxis.setAttribute('x2', 0);\n      yAxis.setAttribute('y2', graphHeight);\n      yAxis.setAttribute('stroke', '#FFFFFF');\n      yAxis.setAttribute('stroke-width', '2');\n      graph.appendChild(yAxis);\n      \n      // Draw x-axis labels\n      uniqueMonths.forEach((month, index) => {\n        const x = getX(index);\n        \n        // Draw tick\n        const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        tick.setAttribute('x1', x);\n        tick.setAttribute('y1', graphHeight);\n        tick.setAttribute('x2', x);\n        tick.setAttribute('y2', graphHeight + 10);\n        tick.setAttribute('stroke', '#FFFFFF');\n        tick.setAttribute('stroke-width', '2');\n        graph.appendChild(tick);\n        \n        // Draw label - only show every other month if there are many months\n        if (uniqueMonths.length <= 12 || index % 2 === 0) {\n          const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n          label.setAttribute('x', x);\n          label.setAttribute('y', graphHeight + 30);\n          label.setAttribute('text-anchor', 'middle');\n          label.setAttribute('font-family', 'Roboto, sans-serif');\n          label.setAttribute('font-size', '14px');\n          label.setAttribute('fill', '#FFFFFF');\n          label.setAttribute('transform', `rotate(45, ${x}, ${graphHeight + 30})`);\n          \n          // Shorten month labels if too many\n          let displayText = month;\n          if (uniqueMonths.length > 12) {\n            const parts = month.split(' ');\n            displayText = parts[0].substring(0, 3) + ' ' + parts[1];\n          }\n          \n          label.textContent = displayText;\n          graph.appendChild(label);\n        }\n      });\n      \n      // Draw y-axis labels\n      const yTicks = 5;\n      for (let i = 0; i <= yTicks; i++) {\n        const value = minValue + ((maxValue - minValue) * (i / yTicks));\n        const y = getY(value);\n        \n        // Draw tick\n        const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        tick.setAttribute('x1', -10);\n        tick.setAttribute('y1', y);\n        tick.setAttribute('x2', 0);\n        tick.setAttribute('y2', y);\n        tick.setAttribute('stroke', '#FFFFFF');\n        tick.setAttribute('stroke-width', '2');\n        graph.appendChild(tick);\n        \n        // Draw label\n        const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        label.setAttribute('x', -15);\n        label.setAttribute('y', y + 5);\n        label.setAttribute('text-anchor', 'end');\n        label.setAttribute('font-family', 'Roboto, sans-serif');\n        label.setAttribute('font-size', '14px');\n        label.setAttribute('fill', '#FFFFFF');\n        label.textContent = value.toFixed(1);\n        graph.appendChild(label);\n        \n        // Draw grid line\n        const gridLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n        gridLine.setAttribute('x1', 0);\n        gridLine.setAttribute('y1', y);\n        gridLine.setAttribute('x2', graphWidth);\n        gridLine.setAttribute('y2', y);\n        gridLine.setAttribute('stroke', 'rgba(255, 255, 255, 0.1)');\n        gridLine.setAttribute('stroke-width', '1');\n        graph.appendChild(gridLine);\n      }\n      \n      // Draw axis titles\n      const xTitle = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      xTitle.setAttribute('x', graphWidth / 2);\n      xTitle.setAttribute('y', graphHeight + 70);\n      xTitle.setAttribute('text-anchor', 'middle');\n      xTitle.setAttribute('font-family', 'Orbitron, sans-serif');\n      xTitle.setAttribute('font-size', '16px');\n      xTitle.setAttribute('fill', '#FFFFFF');\n      xTitle.textContent = 'Month';\n      graph.appendChild(xTitle);\n      \n      const yTitle = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      yTitle.setAttribute('transform', `rotate(-90, -70, ${graphHeight / 2})`);\n      yTitle.setAttribute('x', -70);\n      yTitle.setAttribute('y', graphHeight / 2);\n      yTitle.setAttribute('text-anchor', 'middle');\n      yTitle.setAttribute('font-family', 'Orbitron, sans-serif');\n      yTitle.setAttribute('font-size', '16px');\n      yTitle.setAttribute('fill', '#FFFFFF');\n      yTitle.textContent = 'Emissions (tons CO2e)';\n      graph.appendChild(yTitle);\n      \n      // Draw data lines and points\n      \n      // Draw actual data\n      if (processedData.length > 0) {\n        // Draw line\n        let pathD = '';\n        processedData.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            \n            if (i === 0) {\n              pathD = `M ${x} ${y}`;\n            } else {\n              pathD += ` L ${x} ${y}`;\n            }\n          }\n        });\n        \n        const actualPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        actualPath.setAttribute('d', pathD);\n        actualPath.setAttribute('fill', 'none');\n        actualPath.setAttribute('stroke', '#00FFFF');\n        actualPath.setAttribute('stroke-width', '3');\n        graph.appendChild(actualPath);\n        \n        // Draw points\n        processedData.forEach(point => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            \n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', x);\n            circle.setAttribute('cy', y);\n            circle.setAttribute('r', '8');\n            circle.setAttribute('fill', '#00FFFF');\n            circle.setAttribute('stroke', '#000000');\n            circle.setAttribute('stroke-width', '2');\n            \n            // Add tooltip data\n            circle.setAttribute('data-month', point.monthLabel);\n            circle.setAttribute('data-value', point.emissions.toFixed(2));\n            circle.setAttribute('data-type', 'Actual');\n            \n            // Add hover effect\n            circle.addEventListener('mouseover', showTooltip);\n            circle.addEventListener('mouseout', hideTooltip);\n            \n            graph.appendChild(circle);\n          }\n        });\n      }\n      \n      // Draw forecast data\n      if (processedForecast.length > 0) {\n        // Draw confidence interval\n        let upperPathD = '';\n        let lowerPathD = '';\n        \n        processedForecast.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const upperY = getY(point.upper);\n            const lowerY = getY(point.lower);\n            \n            if (i === 0) {\n              upperPathD = `M ${x} ${upperY}`;\n              lowerPathD = `M ${x} ${lowerY}`;\n            } else {\n              upperPathD += ` L ${x} ${upperY}`;\n              lowerPathD += ` L ${x} ${lowerY}`;\n            }\n          }\n        });\n        \n        // Draw upper bound\n        const upperPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        upperPath.setAttribute('d', upperPathD);\n        upperPath.setAttribute('fill', 'none');\n        upperPath.setAttribute('stroke', 'rgba(255, 0, 255, 0.3)');\n        upperPath.setAttribute('stroke-width', '2');\n        upperPath.setAttribute('stroke-dasharray', '5,5');\n        graph.appendChild(upperPath);\n        \n        // Draw lower bound\n        const lowerPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        lowerPath.setAttribute('d', lowerPathD);\n        lowerPath.setAttribute('fill', 'none');\n        lowerPath.setAttribute('stroke', 'rgba(255, 0, 255, 0.3)');\n        lowerPath.setAttribute('stroke-width', '2');\n        lowerPath.setAttribute('stroke-dasharray', '5,5');\n        graph.appendChild(lowerPath);\n        \n        // Fill confidence interval\n        const confidencePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        confidencePath.setAttribute('d', `${upperPathD} L ${getX(uniqueMonths.indexOf(processedForecast[processedForecast.length-1].monthLabel))} ${getY(processedForecast[processedForecast.length-1].lower)} ${lowerPathD.replace('M', 'L')} Z`);\n        confidencePath.setAttribute('fill', 'rgba(255, 0, 255, 0.1)');\n        confidencePath.setAttribute('stroke', 'none');\n        graph.insertBefore(confidencePath, upperPath);\n        \n        // Draw forecast line\n        let pathD = '';\n        processedForecast.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            \n            if (i === 0) {\n              pathD = `M ${x} ${y}`;\n            } else {\n              pathD += ` L ${x} ${y}`;\n            }\n          }\n        });\n        \n        const forecastPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        forecastPath.setAttribute('d', pathD);\n        forecastPath.setAttribute('fill', 'none');\n        forecastPath.setAttribute('stroke', '#FF00FF');\n        forecastPath.setAttribute('stroke-width', '3');\n        graph.appendChild(forecastPath);\n        \n        // Draw points\n        processedForecast.forEach(point => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            \n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', x);\n            circle.setAttribute('cy', y);\n            circle.setAttribute('r', '8');\n            circle.setAttribute('fill', '#FF00FF');\n            circle.setAttribute('stroke', '#000000');\n            circle.setAttribute('stroke-width', '2');\n            \n            // Add tooltip data\n            circle.setAttribute('data-month', point.monthLabel);\n            circle.setAttribute('data-value', point.emissions.toFixed(2));\n            circle.setAttribute('data-type', 'Forecast');\n            \n            // Add hover effect\n            circle.addEventListener('mouseover', showTooltip);\n            circle.addEventListener('mouseout', hideTooltip);\n            \n            graph.appendChild(circle);\n          }\n        });\n      }\n      \n      // Draw optimized forecast data\n      if (processedOptimized.length > 0) {\n        // Draw line\n        let pathD = '';\n        processedOptimized.forEach((point, i) => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            \n            if (i === 0) {\n              pathD = `M ${x} ${y}`;\n            } else {\n              pathD += ` L ${x} ${y}`;\n            }\n          }\n        });\n        \n        const optimizedPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        optimizedPath.setAttribute('d', pathD);\n        optimizedPath.setAttribute('fill', 'none');\n        optimizedPath.setAttribute('stroke', '#00FF00');\n        optimizedPath.setAttribute('stroke-width', '3');\n        optimizedPath.setAttribute('stroke-dasharray', '5,5');\n        graph.appendChild(optimizedPath);\n        \n        // Draw points\n        processedOptimized.forEach(point => {\n          const monthIndex = uniqueMonths.indexOf(point.monthLabel);\n          if (monthIndex !== -1) {\n            const x = getX(monthIndex);\n            const y = getY(point.emissions);\n            \n            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n            circle.setAttribute('cx', x);\n            circle.setAttribute('cy', y);\n            circle.setAttribute('r', '8');\n            circle.setAttribute('fill', '#00FF00');\n            circle.setAttribute('stroke', '#000000');\n            circle.setAttribute('stroke-width', '2');\n            \n            // Add tooltip data\n            circle.setAttribute('data-month', point.monthLabel);\n            circle.setAttribute('data-value', point.emissions.toFixed(2));\n            circle.setAttribute('data-type', 'Optimized');\n            \n            // Add hover effect\n            circle.addEventListener('mouseover', showTooltip);\n            circle.addEventListener('mouseout', hideTooltip);\n            \n            graph.appendChild(circle);\n          }\n        });\n      }\n      \n      // Create legend\n      const legendGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      legendGroup.setAttribute('transform', `translate(${marginLeft + 20}, ${marginTop - 30})`);\n      \n      const legendItems = [\n        { label: 'Actual Emissions', color: '#00FFFF' },\n        { label: 'Forecast Emissions', color: '#FF00FF' },\n        { label: 'Optimized Emissions', color: '#00FF00' }\n      ];\n      \n      legendItems.forEach((item, index) => {\n        const x = index * 200; // Increased spacing between legend items\n        \n        // Draw color box\n        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        rect.setAttribute('x', x);\n        rect.setAttribute('y', 0);\n        rect.setAttribute('width', 15);\n        rect.setAttribute('height', 15);\n        rect.setAttribute('fill', item.color);\n        rect.setAttribute('stroke', '#000000');\n        rect.setAttribute('stroke-width', '1');\n        legendGroup.appendChild(rect);\n        \n        // Draw label\n        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        text.setAttribute('x', x + 20);\n        text.setAttribute('y', 12);\n        text.setAttribute('font-family', 'Roboto, sans-serif');\n        text.setAttribute('font-size', '12px');\n        text.setAttribute('fill', '#FFFFFF');\n        text.textContent = item.label;\n        legendGroup.appendChild(text);\n      });\n      \n      svg.appendChild(legendGroup);\n      \n      // Create tooltip\n      const tooltip = document.createElement('div');\n      tooltip.className = 'chart-tooltip';\n      tooltip.style.display = 'none';\n      tooltip.style.position = 'absolute';\n      tooltip.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';\n      tooltip.style.color = '#FFFFFF';\n      tooltip.style.padding = '10px';\n      tooltip.style.borderRadius = '5px';\n      tooltip.style.pointerEvents = 'none';\n      tooltip.style.zIndex = '1000';\n      tooltip.style.fontFamily = 'Roboto, sans-serif';\n      tooltip.style.fontSize = '12px';\n      tooltip.style.border = '1px solid rgba(0, 255, 255, 0.5)';\n      tooltip.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.5)';\n      document.body.appendChild(tooltip);\n      \n      // Tooltip functions\n      function showTooltip(event) {\n        const circle = event.target;\n        const month = circle.getAttribute('data-month');\n        const value = circle.getAttribute('data-value');\n        const type = circle.getAttribute('data-type');\n        \n        tooltip.innerHTML = `\n          <div style=\"font-weight: bold; margin-bottom: 5px; color: #00FFFF;\">${month}</div>\n          <div>${type} Emissions: ${value} tons CO2e</div>\n        `;\n        \n        tooltip.style.display = 'block';\n        \n        // Position tooltip near the point but avoid edges\n        const rect = svg.getBoundingClientRect();\n        const circleRect = circle.getBoundingClientRect();\n        \n        // Calculate position to avoid going off-screen\n        let leftPos = circleRect.left + window.scrollX + 10;\n        let topPos = circleRect.top + window.scrollY - 40;\n        \n        // Adjust if tooltip would go off right edge\n        if (leftPos + 200 > window.innerWidth) {\n          leftPos = circleRect.left + window.scrollX - 210;\n        }\n        \n        // Adjust if tooltip would go off top edge\n        if (topPos < 10) {\n          topPos = circleRect.top + window.scrollY + 20;\n        }\n        \n        tooltip.style.left = `${leftPos}px`;\n        tooltip.style.top = `${topPos}px`;\n        \n        // Highlight the point\n        circle.setAttribute('r', '10');\n      }\n      \n      function hideTooltip(event) {\n        tooltip.style.display = 'none';\n        \n        // Reset point size\n        event.target.setAttribute('r', '8');\n      }\n      \n      // Add the SVG to the container\n      container.appendChild(svg);\n      \n      // Clean up tooltip when component unmounts\n      return () => {\n        if (tooltip && tooltip.parentNode) {\n          tooltip.parentNode.removeChild(tooltip);\n        }\n      };\n    };\n    \n    // Create the chart\n    const cleanup = createChart();\n    \n    // Add impact factors section if available\n    if (impacts && Object.keys(impacts).length > 0) {\n      const impactSection = document.createElement('div');\n      impactSection.className = 'impact-factors';\n      \n      const impactTitle = document.createElement('h4');\n      impactTitle.textContent = 'Key Impact Factors';\n      impactSection.appendChild(impactTitle);\n      \n      const impactList = document.createElement('div');\n      impactList.className = 'impact-list';\n      \n      // Sort impacts by score\n      const sortedImpacts = Object.entries(impacts)\n        .sort((a, b) => Math.abs(b[1].impact_score) - Math.abs(a[1].impact_score))\n        .slice(0, 3);\n      \n      sortedImpacts.forEach(([factor, data], index) => {\n        let factorName = factor;\n        if (factor === 'energy_use') factorName = 'Energy Use';\n        if (factor === 'transport') factorName = 'Transport';\n        if (factor === 'waste') factorName = 'Waste';\n        if (factor === 'water') factorName = 'Water';\n        if (factor === 'fuel') factorName = 'Fuel';\n        if (factor === 'grid_intensity') factorName = 'Grid Intensity';\n        \n        const impactItem = document.createElement('div');\n        impactItem.className = 'impact-item';\n        \n        const impactRank = document.createElement('div');\n        impactRank.className = 'impact-rank';\n        impactRank.textContent = index + 1;\n        \n        const impactInfo = document.createElement('div');\n        impactInfo.className = 'impact-info';\n        \n        const impactName = document.createElement('div');\n        impactName.className = 'impact-name';\n        impactName.textContent = factorName;\n        \n        const impactScore = document.createElement('div');\n        impactScore.className = 'impact-score';\n        \n        const impactValue = document.createElement('span');\n        impactValue.className = 'impact-value';\n        impactValue.textContent = Math.abs(data.impact_score).toFixed(2);\n        \n        impactScore.textContent = 'Impact Score: ';\n        impactScore.appendChild(impactValue);\n        \n        impactInfo.appendChild(impactName);\n        impactInfo.appendChild(impactScore);\n        \n        impactItem.appendChild(impactRank);\n        impactItem.appendChild(impactInfo);\n        \n        impactList.appendChild(impactItem);\n      });\n      \n      impactSection.appendChild(impactList);\n      chartRef.current.appendChild(impactSection);\n    }\n    \n    // Add forecast data table below the chart\n    if (forecast && forecast.length > 0) {\n      const tableContainer = document.createElement('div');\n      tableContainer.className = 'forecast-table-container';\n      tableContainer.style.marginTop = '30px';\n      tableContainer.style.width = '100%';\n      tableContainer.style.overflowX = 'auto';\n      \n      const table = document.createElement('table');\n      table.className = 'forecast-table';\n      table.style.width = '100%';\n      table.style.borderCollapse = 'collapse';\n      table.style.color = '#FFFFFF';\n      table.style.fontFamily = 'Roboto, sans-serif';\n      table.style.fontSize = '14px';\n      table.style.textAlign = 'center';\n      \n      // Create table header\n      const thead = document.createElement('thead');\n      const headerRow = document.createElement('tr');\n      \n      const headers = ['Month', 'Predicted Emissions', 'Lower Bound', 'Upper Bound'];\n      if (optimizedForecast && optimizedForecast.length > 0) {\n        headers.push('Optimized Emissions', 'Potential Savings');\n      }\n      \n      headers.forEach(header => {\n        const th = document.createElement('th');\n        th.textContent = header;\n        th.style.padding = '10px';\n        th.style.borderBottom = '1px solid rgba(0, 255, 255, 0.3)';\n        th.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n        headerRow.appendChild(th);\n      });\n      \n      thead.appendChild(headerRow);\n      table.appendChild(thead);\n      \n      // Create table body\n      const tbody = document.createElement('tbody');\n      \n      // Process forecast data for table\n      const tableData = processForecastData(forecast);\n      const optimizedData = optimizedForecast ? processForecastData(optimizedForecast) : [];\n      \n      tableData.forEach((item, index) => {\n        const row = document.createElement('tr');\n        row.style.backgroundColor = index % 2 === 0 ? 'rgba(0, 0, 0, 0.2)' : 'rgba(0, 0, 0, 0.1)';\n        \n        // Month\n        const monthCell = document.createElement('td');\n        monthCell.textContent = item.monthLabel;\n        monthCell.style.padding = '8px';\n        row.appendChild(monthCell);\n        \n        // Predicted Emissions\n        const emissionsCell = document.createElement('td');\n        emissionsCell.textContent = item.emissions.toFixed(2);\n        emissionsCell.style.padding = '8px';\n        row.appendChild(emissionsCell);\n        \n        // Lower Bound\n        const lowerCell = document.createElement('td');\n        lowerCell.textContent = item.lower.toFixed(2);\n        lowerCell.style.padding = '8px';\n        row.appendChild(lowerCell);\n        \n        // Upper Bound\n        const upperCell = document.createElement('td');\n        upperCell.textContent = item.upper.toFixed(2);\n        upperCell.style.padding = '8px';\n        row.appendChild(upperCell);\n        \n        // Add optimized data if available\n        if (optimizedData.length > 0) {\n          const optimizedItem = optimizedData[index];\n          \n          // Optimized Emissions\n          const optimizedCell = document.createElement('td');\n          optimizedCell.textContent = optimizedItem.emissions.toFixed(2);\n          optimizedCell.style.padding = '8px';\n          optimizedCell.style.color = '#00FF00';\n          row.appendChild(optimizedCell);\n          \n          // Potential Savings\n          const savingsCell = document.createElement('td');\n          const savings = item.emissions - optimizedItem.emissions;\n          savingsCell.textContent = savings.toFixed(2);\n          savingsCell.style.padding = '8px';\n          savingsCell.style.color = savings > 0 ? '#00FF00' : '#FF0000';\n          row.appendChild(savingsCell);\n        }\n        \n        tbody.appendChild(row);\n      });\n      \n      table.appendChild(tbody);\n      tableContainer.appendChild(table);\n      chartRef.current.appendChild(tableContainer);\n    }\n    \n    // Return cleanup function\n    return cleanup;\n  }, [data, forecast, optimizedForecast, impacts]);\n\n  // Process actual data to ensure one point per month\n  const processMonthlyData = (data) => {\n    if (!data || data.length === 0) return [];\n    \n    // Group by month\n    const monthlyData = {};\n    \n    data.forEach(item => {\n      if (!item.date || !item.emissions) return;\n      \n      const date = new Date(item.date);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      \n      if (!monthlyData[monthKey]) {\n        monthlyData[monthKey] = {\n          month: monthKey,\n          monthLabel: `${date.toLocaleString('default', { month: 'short' })} ${date.getFullYear()}`,\n          emissions: 0\n        };\n      }\n      \n      monthlyData[monthKey].emissions += parseFloat(item.emissions) || 0;\n    });\n    \n    // Convert to array and sort by month\n    return Object.values(monthlyData)\n      .sort((a, b) => a.month.localeCompare(b.month));\n  };\n  \n  // Process forecast data\n  const processForecastData = (forecastData) => {\n    if (!forecastData || forecastData.length === 0) return [];\n    \n    return forecastData.map(item => {\n      const date = new Date(item.ds);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      \n      return {\n        month: monthKey,\n        monthLabel: `${date.toLocaleString('default', { month: 'short' })} ${date.getFullYear()}`,\n        emissions: item.predicted_emissions,\n        lower: item.lower_bound,\n        upper: item.upper_bound\n      };\n    }).sort((a, b) => a.month.localeCompare(b.month)); // Ensure forecast data is sorted by month\n  };\n\n  return (\n    <div className=\"forecast-chart-container\">\n      <div ref={chartRef} className=\"chart-area\" style={{ minHeight: '600px' }}></div>\n    </div>\n  );\n};\n\nexport default ForecastChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}